{% local lub = require 'lub' %}
project ( {{lib.type}} CXX )

cmake_minimum_required ( VERSION 2.8 )

include ( cmake/dist.cmake )
include ( lua )

# Install lua files
install (
  DIRECTORY {{lib.type}}/
  DESTINATION ${INSTALL_LMOD}/{{lib.type}}
  COMPONENT Runtime
)

# This is not good as it installs in /usr/local/share/xml which might
# be used by some non-lua xml library...
# install_data ( readme.md LICENSE )

# install_example ( examples/ )

# Create and install a Lua module:
include_directories(include src/bind src/vendor)

install_lua_module ( {{lib.type}}.core
{% for path in lub.Dir('src'):glob '%.cpp' do %}
  {{path}}
{% end %}
)

# Schedules a test, this is optional
# add_lua_test ( test/all.lua )

# Install documentation
# install_doc ( doc/ )
